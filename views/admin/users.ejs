<h1 class="mb-3">사용자 관리</h1>
<form class="mb-3" method="get" action="/admin/users">
  <div class="input-group">
    <input type="text" name="q" class="form-control" placeholder="아이디 검색" value="<%= q %>">
    <button class="btn btn-outline-secondary" type="submit">검색</button>
  </div>
</form>
<form method="post" action="/admin/users/delete" onsubmit="return confirm('선택한 사용자를 삭제하시겠습니까?');">
  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th style="width: 1%;"></th>
        <th>아이디</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach(function(u){ %>
        <tr>
          <td><input class="form-check-input" type="radio" name="userId" value="<%= u._id %>"></td>
          <td><%= u.username %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
  <button type="submit" id="deleteBtn" class="btn btn-danger" disabled>삭제</button>
</form>
<script>
  document.querySelectorAll('input[name="userId"]').forEach(function(radio){
    radio.addEventListener('change', function(){
      document.getElementById('deleteBtn').disabled = false;
    });
  });
</script>
