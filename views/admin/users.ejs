<h1 class="mb-3">사용자 관리</h1>
<form class="mb-3" onsubmit="return false;">
  <div class="input-group">
    <input type="text" id="searchUser" class="form-control" placeholder="아이디 검색" value="<%= q %>">
  </div>
</form>
<form method="post" action="/admin/users/delete" onsubmit="return confirm('선택한 사용자를 삭제하시겠습니까?');">
  <table id="usersTable" class="table table-striped table-bordered align-middle data-table">
    <thead>
      <tr>
        <th style="width: 1%;"></th>
        <th>아이디</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach(function(u){ %>
        <tr>
          <td><input class="form-check-input" type="radio" name="userId" value="<%= u._id %>"></td>
          <td><%= u.username %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
  <button type="submit" id="deleteBtn" class="btn btn-danger" disabled>삭제</button>
</form>
<script>
  const table = createDataTable('#usersTable');
  document.getElementById('searchUser').addEventListener('input', function(){
    table.search(this.value).draw();
  });
  document.querySelectorAll('input[name="userId"]').forEach(function(radio){
    radio.addEventListener('change', function(){
      document.getElementById('deleteBtn').disabled = false;
    });
  });
</script>
