<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>관리자 - 인덱스 이미지 관리</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/main.css">
</head>
<body>
  <%- include('../nav.ejs') %>

  <div class="container my-4">
    <h1 class="mb-3">배너 이미지 관리</h1>
    <a href="/admin/permissions" class="btn btn-outline-secondary mb-3">접근 권한 설정</a>
    <% if (hero) { %>
      <img src="<%= hero %>" class="img-fluid mb-3" alt="hero image">
    <% } else { %>
      <p class="text-muted">현재 저장된 이미지가 없습니다.</p>
    <% } %>

    <form id="heroForm" action="/admin/hero" method="post" enctype="multipart/form-data" class="mt-3">
      <div class="mb-3">
        <input type="file" name="hero" accept="image/*" class="form-control" id="heroInput">
      </div>
    
      <!-- 버튼들 한 줄로 정렬 -->
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">업로드</button>
    
        <!-- 삭제 버튼은 별도 form 태그 안에 그대로 두되, d-inline 사용 -->
        <form action="/admin/delete-all" method="POST" onsubmit="return confirm('이미지를 삭제하시겠습니까?')" class="d-inline">
          <button type="submit" class="btn btn-danger">삭제</button>
        </form>
      </div>
    </form>
    
    <!-- ✅ 파일 선택 여부 확인 스크립트 -->
    <script>
      document.getElementById('heroForm').addEventListener('submit', function (e) {
        const fileInput = document.getElementById('heroInput');
        if (!fileInput.files || fileInput.files.length === 0) {
          alert('📂 파일을 선택해 주세요.');
          e.preventDefault(); // 제출 막기
        }
      });
    </script>
    
      

    <hr class="my-5">

    <h2 class="mb-3">브랜드 로고 관리</h2>
    <% if (logo) { %>
      <img src="<%= logo %>" class="img-fluid mb-3" style="max-height:100px" alt="logo">
    <% } else { %>
      <p class="text-muted">저장된 로고가 없습니다.</p>
    <% } %>

    <form id="logoForm" action="/admin/logo" method="post" enctype="multipart/form-data" class="mt-3">
      <div class="mb-3">
        <input type="file" name="logo" accept="image/*" class="form-control" id="logoInput">
      </div>
    
      <!-- 버튼들 한 줄로 정렬 -->
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">업로드</button>
    
        <!-- 삭제 버튼 -->
        <form action="/admin/logo/delete" method="POST" onsubmit="return confirm('로고 이미지를 삭제하시겠습니까?')" class="d-inline">
          <button type="submit" class="btn btn-danger">삭제</button>
        </form>
      </div>
    </form>
    
    <!-- ✅ 파일 유무 체크 스크립트 -->
    <script>
      document.getElementById('logoForm').addEventListener('submit', function (e) {
        const fileInput = document.getElementById('logoInput');
        if (!fileInput.files || fileInput.files.length === 0) {
          alert('📂 파일을 선택해 주세요.');
          e.preventDefault(); // 업로드 중지
        }
      });
    </script>
    
    

    
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>